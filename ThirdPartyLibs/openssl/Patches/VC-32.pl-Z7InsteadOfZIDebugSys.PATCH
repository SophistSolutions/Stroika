*** VC-32-ORIG.pl	2013-02-11 10:26:04.000000000 -0500
--- VC-32.pl	2013-09-18 20:56:53.597296800 -0400
***************
*** 44,50 ****
      # 
      $base_cflags= " $mf_cflag";
      my $f = $shlib || $fips ?' /MD':' /MT';
!     $lib_cflag='/Zl' if (!$shlib);	# remove /DEFAULTLIBs from static lib
      $opt_cflags=$f.' /Ox';
      $dbg_cflags=$f.'d /Od -DDEBUG -D_DEBUG';
      $lflags="/nologo /subsystem:console /opt:ref";
--- 44,50 ----
      # 
      $base_cflags= " $mf_cflag";
      my $f = $shlib || $fips ?' /MD':' /MT';
!     $lib_cflag='/Z7' if (!$shlib);	# remove /DEFAULTLIBs from static lib
      $opt_cflags=$f.' /Ox';
      $dbg_cflags=$f.'d /Od -DDEBUG -D_DEBUG';
      $lflags="/nologo /subsystem:console /opt:ref";
***************
*** 125,131 ****
      {
      $base_cflags= " $mf_cflag";
      my $f = $shlib || $fips ?' /MD':' /MT';
!     $lib_cflag='/Zl' if (!$shlib);	# remove /DEFAULTLIBs from static lib
      $opt_cflags=$f.' /Ox /O2 /Ob2';
      $dbg_cflags=$f.'d /Od -DDEBUG -D_DEBUG';
      $lflags="/nologo /subsystem:console /opt:ref";
--- 125,131 ----
      {
      $base_cflags= " $mf_cflag";
      my $f = $shlib || $fips ?' /MD':' /MT';
!     $lib_cflag='/Z7' if (!$shlib);	# remove /DEFAULTLIBs from static lib
      $opt_cflags=$f.' /Ox /O2 /Ob2';
      $dbg_cflags=$f.'d /Od -DDEBUG -D_DEBUG';
      $lflags="/nologo /subsystem:console /opt:ref";
***************
*** 148,155 ****
  	}
  
  # generate symbols.pdb unconditionally
! $app_cflag.=" /Zi /Fd\$(TMP_D)/app";
! $lib_cflag.=" /Zi /Fd\$(TMP_D)/lib";
  $lflags.=" /debug";
  
  $obj='.obj';
--- 148,155 ----
  	}
  
  # generate symbols.pdb unconditionally
! $app_cflag.=" /Z7 /Fd\$(TMP_D)/app";
! $lib_cflag.=" /Z7 /Fd\$(TMP_D)/lib";
  $lflags.=" /debug";
  
  $obj='.obj';
***************
*** 195,201 ****
  		$asm='nasm -f win64 -DNEAR -Ox -g';
  		$afile='-o ';
  	} else {
! 		$asm='ml64 /c /Cp /Cx /Zi';
  		$afile='/Fo';
  	}
  } elsif ($FLAVOR =~ /WIN64I/) {
--- 195,201 ----
  		$asm='nasm -f win64 -DNEAR -Ox -g';
  		$afile='-o ';
  	} else {
! 		$asm='ml64 /c /Cp /Cx /Z7';
  		$afile='/Fo';
  	}
  } elsif ($FLAVOR =~ /WIN64I/) {
***************
*** 209,215 ****
  	$asmtype="win32n";
  	$afile='-o ';
  } else {
! 	$asm='ml /nologo /Cp /coff /c /Cx /Zi';
  	$afile='/Fo';
  	$asmtype="win32";
  }
--- 209,215 ----
  	$asmtype="win32n";
  	$afile='-o ';
  } else {
! 	$asm='ml /nologo /Cp /coff /c /Cx /Z7';
  	$afile='/Fo';
  	$asmtype="win32";
  }
