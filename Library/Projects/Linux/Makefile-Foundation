ObjDir                          =       ./
SrcDir                          =       ../../Library/Sources/Stroika/Foundation/
LibDir				=	../../Builds/Platform_Linux/
Includes                        =       -I.


StroikaFoundationLib		=	$(LibDir)Stroika-Foundation.a


VPATH = $(SrcDir) $(LibDir)


SubDirs=	\
	Characters		\
	Configuration		\
	Containers		\
	Cryptography		\
	Database			\
	DataExchangeFormat	\
	Debug			\
	Execution			\
	IO				\
	Math				\
	Memory			\
	Streams			\
	Time				\


.DEFAULT_GOAL := all



all-objs:
	@for i in $(SubDirs);\
	do\
	    (cd $$i; make -s all)\
	done


$(StroikaFoundationLib):	all-objs
	@echo "PROBABLY WRONG HANDLING OF OVERLAPPING NAMESPACES (eg common in two dirs) - but a decent start"
	@mkdir -p $(LibDir)
	@rm -f Stroika-Foundation.a
	@for i in $(SubDirs);\
	do\
	    (cd $$i; for oo in `make -s list-objs`; do (cd ..; ar cq $(StroikaFoundationLib) $$i/$$oo); done )\
	done
	ranlib $(StroikaFoundationLib)


all:	$(StroikaFoundationLib)


clean:
	@for i in $(SubDirs);\
	do\
	    (cd $$i; make -s clean;)\
	done

clobber::
	@rm $(StroikaFoundationLib)


Build:	all


